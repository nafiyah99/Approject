<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Pages / Register</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <!-- Google Fonts -->
    <link href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet" />

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
    <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet" />
    <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet" />
    <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet" />
    <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet" />

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet" />
    <style>
      .form-step {
        display: none;
      }
      .form-step.active {
        display: block;
      }
      .loading {
        display: none;
        text-align: center;
        margin-top: 20px;
      }
      .spinner-border {
        width: 1.2rem;
        height: 1.2rem;
      }
      .form-floating {
        margin-top: 15px;
        margin-bottom: 15px
      }
      .btn {
        margin-top: 5px;
        margin-bottom: 5px;
      }
      #togglePassword {
        position: absolute;
        right: 0;
        top: 0;
        height: 60%;
        border: none;
        background: none;
      }

      #togglePassword i {
        cursor: pointer;
      }
    </style>
  </head>

  <body>
    <main>
      <div class="container">
        <section class="section register min-vh-100 d-flex flex-column align-items-center justify-content-center py-4">
          <div class="container">
            <div class="row justify-content-center">
              <div class="col-lg-6 col-md-6 d-flex flex-column align-items-center justify-content-center">
                <div class="d-flex justify-content-center py-4">
                  <a href="index.html" class="logo d-flex align-items-center w-auto">
                    <img src="assets/img/logo.png" alt="" />
                    <span class="d-none d-lg-block">NiceAdmin</span>
                  </a>
                </div>
                <!-- End Logo -->

                <div class="card mb-3">
                  <div class="card-body">
                    <div class="pt-4 pb-2">
                      <h5 class="card-title text-center pb-0 fs-4">Register</h5>
                      <p class="text-center small">Enter your personal details to create an account</p>
                    </div>

                    <!-- Registration Form -->
                    <form class="row g-3 needs-validation" id="registrationForm" novalidate>
                      <!-- Step 1: Phone Number -->
                      <div class="form-step step-1 active">
                        <div class="col-12">
                          <div class="form-floating mt-0">
                            <input type="text" class="form-control" id="inputPhone" placeholder="Phone Number" pattern="^8\d{9,}$" required />
                            <label for="inputPhone">Phone Number</label>
                            <p class="mt-1 mb-0" style="color: gray"><small>Enter your valid phone number starting with 8</small></p>
                            <div class="invalid-feedback">Please enter a valid phone number starting with 8 and consisting of at least 10 digits.</div>
                          </div>
                        </div>
                        <div class="col-12">
                          <button type="button" class="btn btn-dark w-100" onclick="showStep(2)" id="nextButtonStep1" disabled>Next</button>
                        </div>
                      </div>

                      <!-- Step 2: Name, Email, Password -->
                      <div class="form-step step-2">
                        <div class="col-12">
                          <div class="form-floating">
                            <input type="text" class="form-control" id="inputName" placeholder="Name" required />
                            <label for="inputName">Name</label>
                            <div class="invalid-feedback">Please enter your name.</div>
                          </div>
                        </div>
                        <div class="col-12">
                          <div class="form-floating">
                            <input type="email" class="form-control" id="inputEmail" placeholder="name@mail.com" pattern="^[a-zA-Z0-9._%+-]+@mail\.com$" required />
                            <label for="inputEmail">Email</label>
                            <div class="invalid-feedback">Please enter a valid email address ending with @mail.com.</div>
                          </div>
                        </div>
                        <div class="col-12">
                          <div class="form-floating">
                            <input type="password" class="form-control" id="inputPass" placeholder="Password" pattern="^(?=.*\d).{8,}$" required />
                            <button type="button" class="btn btn-outline-secondary" id="togglePassword">
                              <i class="bi bi-eye-slash"></i>
                            </button>
                            <label for="inputPass">Password</label>
                            <p class="mb-1" style="color: gray"><small>Must have at least 8 characters and include a number</small></p>
                            <div class="invalid-feedback">Please provide a valid password with at least 8 characters and one number.</div>
                          </div>
                        </div>
                        <div class="col-12">
                          <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="acceptTerms" required />
                            <label class="form-check-label mb-1" for="acceptTerms">I agree and accept the <a href="#">terms and conditions</a></label>
                            <div class="invalid-feedback">You must agree before submitting.</div>
                          </div>
                        </div>
                        <div class="col-12">
                          <button type="submit" class="btn btn-dark w-100" id="submitButton">
                            Create Account
                            <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
                          </button>
                        </div>
                        <div class="mt-3 text-center" id="orLoginText">
                          <p class="small mb-0">
                            or <a href="pages-login.html" style="text-decoration: none">Login</a>
                            if you already have an account
                          </p>
                        </div>
                      </div>

                      <!-- Loading Spinner -->
                      <div class="loading">
                        <div class="spinner-border text-primary" role="status">
                          <span class="visually-hidden">Loading...</span>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Toast Container -->
        <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
          <div id="customAlertToast" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
              <strong class="me-auto">Alert</strong>
              <small class="text-muted">just now</small>
              <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
              <!-- Custom message will be inserted here -->
            </div>
          </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

        <script>
          function showToast(message) {
            var toastElement = document.getElementById('customAlertToast');
            var toastBody = toastElement.querySelector('.toast-body');
            toastBody.textContent = message;

            var toast = new bootstrap.Toast(toastElement);
            toast.show();
          }

          function showStep(stepNumber) {
            var steps = document.querySelectorAll('.form-step');
            steps.forEach(function (step) {
              step.classList.remove('active');
            });
            document.querySelector('.step-' + stepNumber).classList.add('active');
          }

          function validatePhoneNumber() {
            var phoneInput = document.getElementById('inputPhone');
            var phonePattern = /^8\d{9,}$/;

            if (phonePattern.test(phoneInput.value)) {
              phoneInput.classList.remove('is-invalid');
              document.getElementById('nextButtonStep1').disabled = false;
            } else {
              phoneInput.classList.add('is-invalid');
              document.getElementById('nextButtonStep1').disabled = true;
            }
          }

          function completeRegistration(event) {
            event.preventDefault(); // Prevent the form from submitting

            var form = document.getElementById('registrationForm');
            var submitButton = document.getElementById('submitButton');
            var spinner = submitButton.querySelector('.spinner-border');

            if (form.checkValidity()) {
              // Show spinner and disable button
              submitButton.disabled = true;
              spinner.classList.remove('d-none');

              setTimeout(function () {
                showToast('Registration completed successfully');
                setTimeout(function () {
                  window.location.href = 'home.html';
                }, 2000); // Adjust the delay as needed
              }, 1000); // Simulate loading time
            } else {
              form.classList.add('was-validated'); // Add validation feedback
            }
          }

          document.getElementById('inputPhone').addEventListener('input', validatePhoneNumber);

          (function () {
            'use strict';

            var form = document.getElementById('registrationForm');
            form.addEventListener('submit', completeRegistration, false);
          })();
        </script>
        <script>
          document.addEventListener('DOMContentLoaded', function () {
            var togglePassword = document.getElementById('togglePassword');
            var passwordField = document.getElementById('inputPass');
    
            togglePassword.addEventListener('click', function () {
              // Toggle the type attribute
              var type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
              passwordField.setAttribute('type', type);
    
              // Toggle the icon
              this.querySelector('i').classList.toggle('bi-eye-slash');
              this.querySelector('i').classList.toggle('bi-eye');
            });
          });
        </script>
      </div>
    </main>

    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/apexcharts/apexcharts.min.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/chart.js/chart.umd.js"></script>
    <script src="assets/vendor/echarts/echarts.min.js"></script>
    <script src="assets/vendor/quill/quill.js"></script>
    <script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
    <script src="assets/vendor/tinymce/tinymce.min.js"></script>
    <script src="assets/vendor/php-email-form/validate.js"></script>

    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>
  </body>
</html>
